webpackJsonp([11],{"+snI":function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var s=a("O6AN"),i={mounted:function(){this.getList()},data:function(){return{tabs:[{name:"1",label:"未阅"},{name:"2",label:"已阅"},{name:"3",label:"所有"}],listPostData:{type:"1",currentPage:1,currentSize:10},listInfo:null,readStatusPostData:{type:"",_id:""},rules:{title:[{required:!0,message:"标题不能为空白",trigger:"blur"},{min:0,message:"内容不能为空白",trigger:"blur"}],content:[{required:!0,message:"内容不能为空白",trigger:"blur"}]},delAlert:!1,delId:"",addAlert:!1,addPostData:{content:""}}},methods:{getList:function(){var t=this;Object(s.a)("/recordsGetList",this.listPostData).then(function(e){200===e.data.code&&(t.listInfo=e.data.body)})},changeReadStatus:function(){var t=this;Object(s.b)("/recordsChangeReadStatus",this.readStatusPostData).then(function(e){200===e.data.code?(t.$message.success(e.data.message),t.getList()):t.$message.error(e.data.message)})},delListItem:function(t){var e=this;Object(s.a)("/recordsDelItem",{_id:t}).then(function(t){200===t.data.code?(e.$message.success(t.data.message),e.delAlert=!1,e.getList()):e.$message.error(t.data.message)})},addListItem:function(){var t=this;Object(s.b)("/recordsAddItem",this.addPostData).then(function(e){200===e.data.code&&(t.addAlert=!1,t.getList())})},handleSizeChange:function(t){this.listPostData.currentSize=t,this.getList()},handleCurrentChange:function(t){this.listPostData.currentPage=t,this.getList()},setReadStatus:function(t){this.readStatusPostData.type=t.type,this.readStatusPostData._id=t._id,this.changeReadStatus()},delItem:function(t){this.delId=t._id,this.delAlert=!0},delSure:function(){this.delListItem(this.delId)},addItem:function(){this.addPostData.content="",this.addAlert=!0},addHandleClose:function(){this.addResetForm("ruleForm"),this.addAlert=!1},addRresetForm:function(t){this.$refs[t].resetFields()},addResetForm:function(t){this.$refs[t].resetFields()},addSubmitForm:function(t){var e=this;this.$refs[t].validate(function(t){if(!t)return!1;e.addListItem()})}},watch:{"listPostData.type":function(){this.getList()}}},n={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"container_wrapper"},[a("p",{staticClass:"page-title"},[t._v("随手记页面")]),t._v(" "),a("div",{staticClass:"add-wrap rel mb14",staticStyle:{height:"32px"}},[a("el-button",{staticClass:"addBtn",attrs:{type:"primary",size:"small"},on:{click:function(e){return e.stopPropagation(),t.addItem(e)}}},[t._v("添加")])],1),t._v(" "),a("el-tabs",{attrs:{type:"card"},model:{value:t.listPostData.type,callback:function(e){t.$set(t.listPostData,"type",e)},expression:"listPostData.type"}},t._l(t.tabs,function(t,e){return a("el-tab-pane",{key:e,attrs:{label:t.label,name:t.name}})})),t._v(" "),a("el-card",{staticClass:"box-card card"},[t.listInfo?a("div",[a("el-table",{staticStyle:{width:"100%"},attrs:{data:t.listInfo.records}},[a("el-table-column",{attrs:{prop:"id",label:"ID",width:"180"}}),t._v(" "),a("el-table-column",{attrs:{prop:"content",label:"内容"}}),t._v(" "),a("el-table-column",{attrs:{prop:"date",label:"日期",width:"200"}}),t._v(" "),a("el-table-column",{attrs:{label:"操作",width:"180"},scopedSlots:t._u([{key:"default",fn:function(e){return["1"===e.row.type?a("el-button",{attrs:{type:"primary",size:"mini"},on:{click:function(a){a.stopPropagation(),t.setReadStatus(e.row)}}},[t._v("置为已阅")]):t._e(),t._v(" "),"2"===e.row.type?a("el-button",{attrs:{type:"primary",size:"mini"},on:{click:function(a){a.stopPropagation(),t.setReadStatus(e.row)}}},[t._v("置为未阅")]):t._e(),t._v(" "),a("el-button",{attrs:{type:"primary",size:"mini"},on:{click:function(a){a.stopPropagation(),t.delItem(e.row)}}},[t._v("删除")])]}}])})],1),t._v(" "),a("div",{staticClass:"rel mt28 pagination-wrap"},[a("el-pagination",{staticClass:"pagination",attrs:{"current-page":t.listInfo.currentPage,"page-sizes":[10,20,50,100],"page-size":t.listInfo.currentSize,layout:"total, sizes, prev, pager, next, jumper",total:t.listInfo.totalrecord},on:{"size-change":t.handleSizeChange,"current-change":t.handleCurrentChange}})],1)],1):a("p",[t._v("该类型暂无数据")])]),t._v(" "),a("div",{staticClass:"alert"},[a("el-dialog",{attrs:{title:"确定删除吗？",visible:t.delAlert,width:"50%"},on:{"update:visible":function(e){t.delAlert=e}}},[a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{size:"mini"},on:{click:function(e){t.delAlert=!1}}},[t._v("取 消")]),t._v(" "),a("el-button",{attrs:{size:"mini",type:"primary"},on:{click:t.delSure}},[t._v("确 定")])],1)]),t._v(" "),a("el-dialog",{attrs:{title:"添加列表item",visible:t.addAlert,"before-close":t.addHandleClose,width:"50%"},on:{"update:visible":function(e){t.addAlert=e}}},[a("el-form",{ref:"ruleForm",staticClass:"demo-ruleForm",attrs:{model:t.addPostData,rules:t.rules,"label-width":"100px"}},[a("el-form-item",{attrs:{label:"内容",prop:"content"}},[a("el-input",{attrs:{type:"textarea",rows:"15"},model:{value:t.addPostData.content,callback:function(e){t.$set(t.addPostData,"content",e)},expression:"addPostData.content"}})],1),t._v(" "),a("el-form-item",[a("el-button",{attrs:{type:"primary"},on:{click:function(e){t.addSubmitForm("ruleForm")}}},[t._v("立即添加")]),t._v(" "),a("el-button",{on:{click:function(e){t.addRresetForm("ruleForm")}}},[t._v("重置")])],1)],1)],1)],1)],1)},staticRenderFns:[]};var r=a("C7Lr")(i,n,!1,function(t){a("2MN0")},"data-v-1471606b",null);e.default=r.exports},"2MN0":function(t,e){}});
//# sourceMappingURL=11.49ffa1ab1a4969b70aff.js.map